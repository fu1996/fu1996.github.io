"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5170],{3905:(n,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>d});var a=t(67294);function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){l(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function c(n,e){if(null==n)return{};var t,a,l=function(n,e){if(null==n)return{};var t,a,l={},o=Object.keys(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||(l[t]=n[t]);return l}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(l[t]=n[t])}return l}var i=a.createContext({}),s=function(n){var e=a.useContext(i),t=e;return n&&(t="function"==typeof n?n(e):r(r({},e),n)),t},p=function(n){var e=s(n.components);return a.createElement(i.Provider,{value:e},n.children)},u="mdxType",m={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},k=a.forwardRef((function(n,e){var t=n.components,l=n.mdxType,o=n.originalType,i=n.parentName,p=c(n,["components","mdxType","originalType","parentName"]),u=s(t),k=l,d=u["".concat(i,".").concat(k)]||u[k]||m[k]||o;return t?a.createElement(d,r(r({ref:e},p),{},{components:t})):a.createElement(d,r({ref:e},p))}));function d(n,e){var t=arguments,l=e&&e.mdxType;if("string"==typeof n||l){var o=t.length,r=new Array(o);r[0]=k;var c={};for(var i in e)hasOwnProperty.call(e,i)&&(c[i]=e[i]);c.originalType=n,c[u]="string"==typeof n?n:l,r[1]=c;for(var s=2;s<o;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}k.displayName="MDXCreateElement"},208:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var a=t(87462),l=(t(67294),t(3905));const o={authors:"junkui",title:"js\u7684new\u539f\u7406\u548capply-call-bind",categories:["js","work"],tags:["js","work","\u524d\u7aef"],date:new Date("2021-02-26T17:19:33.000Z")},r="js \u7684 new \u539f\u7406\u548c apply-call-bind",c={permalink:"/blog/js\u7684new\u539f\u7406\u548capply-call-bind",source:"@site/blog/js\u7684new\u539f\u7406\u548capply-call-bind.md",title:"js\u7684new\u539f\u7406\u548capply-call-bind",description:"1.new \u539f\u7406",date:"2021-02-26T17:19:33.000Z",formattedDate:"2021\u5e742\u670826\u65e5",tags:[{label:"js",permalink:"/blog/tags/js"},{label:"work",permalink:"/blog/tags/work"},{label:"\u524d\u7aef",permalink:"/blog/tags/\u524d\u7aef"}],readingTime:7.355,hasTruncateMarker:!1,authors:[{name:"\u4ed8\u4fca\u594e",title:"\u4ece\u517b\u732a\u8f6c\u7801\u519c\u7684\u81ea\u5b66\u8005",url:"https://github.com/fu1996",imageURL:"https://avatars.githubusercontent.com/u/42232973",key:"junkui"}],frontMatter:{authors:"junkui",title:"js\u7684new\u539f\u7406\u548capply-call-bind",categories:["js","work"],tags:["js","work","\u524d\u7aef"],date:"2021-02-26T17:19:33.000Z"},prevItem:{title:"\u524d\u7aef\u8981\u7528\u7684\u7f13\u5b58",permalink:"/blog/\u524d\u7aef\u8981\u7528\u7684\u7f13\u5b58"},nextItem:{title:"js\u7684\u72b6\u6001\u7801\u4e13\u9898",permalink:"/blog/js\u7684\u72b6\u6001\u7801\u4e13\u9898"}},i={authorsImageUrls:[void 0]},s=[{value:"1.new \u539f\u7406",id:"1new-\u539f\u7406",level:2},{value:"\u4f7f\u7528<code>new</code>\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61",id:"\u4f7f\u7528new\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61",level:3},{value:"\u4e0d\u4f7f\u7528<code>new</code>\u76f4\u63a5\u521b\u5efa",id:"\u4e0d\u4f7f\u7528new\u76f4\u63a5\u521b\u5efa",level:3},{value:"\u65e2\u7136 new \u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61 \u6211\u4eec\u624b\u52a8\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",id:"\u65e2\u7136-new-\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61-\u6211\u4eec\u624b\u52a8\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",level:3},{value:"\u4f7f\u7528 new \u4e0d\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",id:"\u4f7f\u7528-new-\u4e0d\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61",level:3},{value:"\u603b\u7ed3\uff1a",id:"\u603b\u7ed3",level:3},{value:"2. apply call bind \u7684\u7528\u6cd5",id:"2-apply-call-bind-\u7684\u7528\u6cd5",level:2},{value:"\u76f8\u540c\u70b9",id:"\u76f8\u540c\u70b9",level:3},{value:"\u5f02\u540c\u70b9",id:"\u5f02\u540c\u70b9",level:3},{value:"\u76ee\u7684",id:"\u76ee\u7684",level:3},{value:"3.\u6539\u53d8 this \u6307\u5411\u7684\u5e94\u7528\u573a\u666f",id:"3\u6539\u53d8-this-\u6307\u5411\u7684\u5e94\u7528\u573a\u666f",level:2},{value:"\u5224\u65ad\u6570\u636e\u7c7b\u578b",id:"\u5224\u65ad\u6570\u636e\u7c7b\u578b",level:3},{value:"\u7c7b\u6570\u7ec4\u501f\u7528\u65b9\u6cd5",id:"\u7c7b\u6570\u7ec4\u501f\u7528\u65b9\u6cd5",level:3},{value:"\u83b7\u53d6\u6570\u7ec4\u7684\u6700\u5927\u6700\u5c0f\u503c",id:"\u83b7\u53d6\u6570\u7ec4\u7684\u6700\u5927\u6700\u5c0f\u503c",level:3},{value:"\u7ee7\u627f",id:"\u7ee7\u627f",level:3},{value:"4.\u624b\u5199\u65b9\u6cd5",id:"4\u624b\u5199\u65b9\u6cd5",level:2},{value:"new \u7684\u5b9e\u73b0",id:"new-\u7684\u5b9e\u73b0",level:3},{value:"call \u7684\u5b9e\u73b0 \u539f\u7406 \u548c\u80cc\u666f",id:"call-\u7684\u5b9e\u73b0-\u539f\u7406-\u548c\u80cc\u666f",level:3},{value:"apply \u7684\u5b9e\u73b0\u548c call \u5dee\u4e0d\u591a \u53ea\u4e0d\u8fc7\u53c2\u6570\u662f\u6570\u7ec4",id:"apply-\u7684\u5b9e\u73b0\u548c-call-\u5dee\u4e0d\u591a-\u53ea\u4e0d\u8fc7\u53c2\u6570\u662f\u6570\u7ec4",level:3},{value:"bind \u7684\u539f\u7406 \u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570",id:"bind-\u7684\u539f\u7406-\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570",level:3}],p={toc:s},u="wrapper";function m(n){let{components:e,...t}=n;return(0,l.kt)(u,(0,a.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"1new-\u539f\u7406"},"1.new \u539f\u7406"),(0,l.kt)("h3",{id:"\u4f7f\u7528new\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"h3"},"new"),"\u6784\u9020\u51fd\u6570\u521b\u5efa\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function Person() {\n  this.name = "Jack";\n}\nvar p = new Person();\nconsole.log(p.name); // Jack\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3010p\u3011"),(0,l.kt)("li",{parentName:"ol"},"\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u548c\u65b9\u6cd5\u3010\u4f5c\u7528\u57df\u3011 \u8981\u4ece\u6784\u9020\u51fd\u6570\u4e2d\u83b7\u53d6\u3010this \u8981\u6307\u5411\u65b0\u7684\u5bf9\u8c61\u3011"),(0,l.kt)("li",{parentName:"ol"},"\u6267\u884c\u4e00\u4e0b\u6784\u9020\u51fd\u6570\u7684\u4ee3\u7801\u3010\u4e3a\u65b0\u5bf9\u8c61",(0,l.kt)("inlineCode",{parentName:"li"},"p"),"\u6dfb\u52a0\u5c5e\u6027\u3011"),(0,l.kt)("li",{parentName:"ol"},"\u8fd4\u56de\u8fd9\u4e2a\u65b0\u5bf9\u8c61",(0,l.kt)("inlineCode",{parentName:"li"},"p"))),(0,l.kt)("h3",{id:"\u4e0d\u4f7f\u7528new\u76f4\u63a5\u521b\u5efa"},"\u4e0d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"h3"},"new"),"\u76f4\u63a5\u521b\u5efa"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function Person() {\n  this.name = \"Jack\";\n}\nvar p = Person(); // \u8fd9\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u51fd\u6570\u7684\u6267\u884c\u4e86\nconsole.log(p); // undefined\nconsole.log(name); // Jack\nconsole.log(p.name); // 'name' of undefined\n")),(0,l.kt)("p",null,"\u4e0d\u4f7f\u7528 new \u7684\u8bdd\uff0c\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u51fd\u6570\u7684\u6267\u884c\u4e86\uff0c\u9ed8\u8ba4\u7684 this \u6307\u5411\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"window")),(0,l.kt)("h3",{id:"\u65e2\u7136-new-\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61-\u6211\u4eec\u624b\u52a8\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"},"\u65e2\u7136 new \u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8c61 \u6211\u4eec\u624b\u52a8\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function Person() {\n  this.name = "Jack";\n  return { age: 18 };\n}\nvar p = new Person();\nconsole.log(p); // {age: 18}\nconsole.log(p.name); // undefined\nconsole.log(p.age); // 18\n')),(0,l.kt)("p",null,"\u5f53\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u7684\u65f6\u5019\uff0cnew \u76f4\u63a5\u8fd4\u56de\u4e86\u8fd9\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u901a\u8fc7 new \u6267\u884c\u751f\u6210\u7684\u8fd9\u4e2a\u5bf9\u8c61\u3002\u3010new \u6bd4\u8f83\u61d2\uff0c\u5148\u5224\u65ad\u6709\u73b0\u6210\u7684\u6ca1\uff0c\u6ca1\u6709\u7684\u8bdd\u518d\u81ea\u5df1\u521b\u9020\u3011"),(0,l.kt)("h3",{id:"\u4f7f\u7528-new-\u4e0d\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"},"\u4f7f\u7528 new \u4e0d\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function Person() {\n  this.name = "Jack";\n  return "tom";\n}\nvar p = new Person();\nconsole.log(p); // {name: \'Jack\'}\nconsole.log(p.name); // Jack\n')),(0,l.kt)("p",null,"\u54c8\u54c8\uff0c\u771f\u7684\u662f\u61d2\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd4\u56de\u7684\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61\u4e86\uff0cnew \u6ca1\u529e\u6cd5\u4e86\uff0c\u53ea\u80fd\u6267\u884c\u81ea\u5df1\u7684\u529f\u80fd\u4e86\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002"),(0,l.kt)("h3",{id:"\u603b\u7ed3"},"\u603b\u7ed3\uff1a"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"new \u5173\u952e\u8bcd \u6267\u884c\u4e4b\u540e\u603b\u662f\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8981\u4e48\u662f\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u8981\u4e48\u662f return \u8fd4\u56de\u7684\u5bf9\u8c61")),(0,l.kt)("h2",{id:"2-apply-call-bind-\u7684\u7528\u6cd5"},"2. apply call bind \u7684\u7528\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"func.call(thisArg, param1, param2, ...)\nfunc.apply(thisArg, [param1,param2,...])\nfunc.bind(thisArg, param1, param2, ...)\n")),(0,l.kt)("p",null,"\u6539\u53d8\u51fd\u6570 func \u4e2d\u7684 this \u7684\u6307\u5411\uff0c\u5982\u679c func \u4e2d\u6ca1\u6709 this \u7684\u8bdd\uff0c\u6ca1\u5565\u7528\u4e86\u3002"),(0,l.kt)("p",null,"\u539f\u7406\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u6267\u884c\u7684\u8fd8\u662f func \u7684\u4ee3\u7801\uff0c\u4f46\u662f\u91cc\u9762\u7684 this \u6307\u5411\u7684\u662f thisArg")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function func(text){\n    console.log(text) // '111'\n    return '123' // \u63a7\u5236\u53f0\u6253\u5370undefined \u56e0\u4e3a\u8fd9\u4e2a\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c\n}\nfunc.call({},'111'\n")),(0,l.kt)("h3",{id:"\u76f8\u540c\u70b9"},"\u76f8\u540c\u70b9"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u90fd\u53ef\u4ee5\u6539\u53d8 this \u7684\u6307\u5411")),(0,l.kt)("h3",{id:"\u5f02\u540c\u70b9"},"\u5f02\u540c\u70b9"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f20\u53c2\u4e0d\u540c\uff0capply \u7684\u662f\u6570\u7ec4\uff0ccall \u548c bind \u7684\u6b63\u5e38\u4f20\u53c2"),(0,l.kt)("li",{parentName:"ol"},"\u8c03\u7528\u7ed3\u679c\u4e0d\u540c\uff0capply \u548c call \u4f1a\u7acb\u5373\u6267\u884c\uff0cbind \u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570")),(0,l.kt)("h3",{id:"\u76ee\u7684"},"\u76ee\u7684"),(0,l.kt)("p",null,"\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u8282\u7701\u5185\u5b58\u7a7a\u95f4\uff0c\u8282\u7ea6\u91cd\u590d\u5b9a\u4e49\u3002\u4e0d\u60f3\u518d\u5b9a\u4e00\u4e2a\u529f\u80fd\u76f8\u540c\u7684\u51fd\u6570\u4e86\uff0c\u53ea\u662f\u4f7f\u7528\u8fd9\u4e2a\u65b9\u6cd5\u7684\u5bf9\u8c61\u6539\u53d8\u4e86\u800c\u5df2\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"PS:"),"\u751f\u6d3b\u4e2d\u6211\u4e0d\u7ecf\u5e38\u505a\u996d\uff0c\u5bb6\u91cc\u6ca1\u6709\u9505\uff0c\u5468\u672b\u7a81\u7136\u60f3\u7ed9\u81ea\u5df1\u505a\u4e2a\u996d\u5c1d\u5c1d\u3002\u4f46\u662f\u5bb6\u91cc\u6ca1\u6709\u9505\uff0c\u800c\u6211\u53c8\u4e0d\u60f3\u51fa\u53bb\u4e70\uff0c\u6240\u4ee5\u5c31\u95ee\u9694\u58c1\u90bb\u5c45\u501f\u4e86\u4e00\u4e2a\u9505\u6765\u7528\uff0c\u8fd9\u6837\u505a\u4e86\u996d\uff0c\u53c8\u8282\u7701\u4e86\u5f00\u9500\uff0c\u4e00\u4e3e\u4e24\u5f97\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'const cooker = {\n  name: "\u53a8\u5e08",\n  cook: function (food) {\n    return `${this.name} make ${food}`;\n  },\n};\n\nconsole.log(cooker.cook("pizza")); // \u53a8\u5e08 make pizza\n\nconst me = {\n  name: "fjk",\n};\nconsole.log(cooker.cook.call(me, "banana")); // fjk make banana\n')),(0,l.kt)("h2",{id:"3\u6539\u53d8-this-\u6307\u5411\u7684\u5e94\u7528\u573a\u666f"},"3.\u6539\u53d8 this \u6307\u5411\u7684\u5e94\u7528\u573a\u666f"),(0,l.kt)("h3",{id:"\u5224\u65ad\u6570\u636e\u7c7b\u578b"},"\u5224\u65ad\u6570\u636e\u7c7b\u578b"),(0,l.kt)("p",null,"Object.prototype.toString \u6765\u5224\u65ad\u7c7b\u578b\u662f\u6700\u5408\u9002\u7684\uff0c\u501f\u7528\u5b83\u6211\u4eec\u51e0\u4e4e\u53ef\u4ee5\u5224\u65ad\u6240\u6709\u7c7b\u578b\u7684\u6570\u636e\u7c7b\u578b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function getType(obj) {\n  let type = typeof obj;\n  if (type !== "object") {\n    return type;\n  }\n  return Object.prototype.toString.call(obj).replace(/^$/, "$1");\n}\n')),(0,l.kt)("h3",{id:"\u7c7b\u6570\u7ec4\u501f\u7528\u65b9\u6cd5"},"\u7c7b\u6570\u7ec4\u501f\u7528\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'var arrayLike = {\n  0: "java",\n  1: "script",\n  length: 2,\n};\nArray.prototype.push.call(arrayLike, "jack", "lily");\nconsole.log(typeof arrayLike); // \'object\'\nconsole.log(arrayLike);\n// {0: "java", 1: "script", 2: "jack", 3: "lily", length: 4}\n')),(0,l.kt)("h3",{id:"\u83b7\u53d6\u6570\u7ec4\u7684\u6700\u5927\u6700\u5c0f\u503c"},"\u83b7\u53d6\u6570\u7ec4\u7684\u6700\u5927\u6700\u5c0f\u503c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"let arr = [13, 6, 10, 11, 16];\nconst max = Math.max.apply(Math, arr);\nconst min = Math.min.apply(Math, arr);\n\nconsole.log(max); // 16\nconsole.log(min); // 6\n")),(0,l.kt)("h3",{id:"\u7ee7\u627f"},"\u7ee7\u627f"),(0,l.kt)("h2",{id:"4\u624b\u5199\u65b9\u6cd5"},"4.\u624b\u5199\u65b9\u6cd5"),(0,l.kt)("h3",{id:"new-\u7684\u5b9e\u73b0"},"new \u7684\u5b9e\u73b0"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function myNew(fn, ...args) {\n  if (typeof fn !== "function") {\n    throw new Error("\u5fc5\u987b\u662f\u4e00\u4e2a\u51fd\u6570\u7c7b\u578b\u7684");\n  }\n  //   \u521b\u5efa\u4e00\u4e2a\u65b0\u5bf9\u8c61\n  const newObj = {};\n  //   \u662f\u65b0\u5bf9\u8c61\u7684\u5c5e\u6027\u53ef\u4ee5\u8bbf\u95ee \u6784\u9020\u51fd\u6570\u7684\u5c5e\u6027\n  newObj.__proto__ = Object.create(fn.prototype);\n  //   \u5bf9\u65b0\u5bf9\u8c61 \u6267\u884c\u6784\u9020\u51fd\u6570 \u5bf9 newObj \u8fdb\u884c\u4e00\u4e9b\u5c5e\u6027\u8d4b\u503c\u64cd\u4f5c\n  const result = fn.call(newObj, ...args);\n  // \u5224\u65ad\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e0d\u662f\u5bf9\u8c61 \u5e76\u4e14\u4e0d\u4f1a\u4e3a null\n  const isObj = typeof result === "object" && result !== null;\n  const isFunc = typeof result === "function";\n  return isObj || isFunc ? result : newObj;\n}\n\nfunction Father(name) {\n  this.name = name;\n}\n\nconst p = myNew(Father, "haha");\nconsole.log(p.name);\n')),(0,l.kt)("h3",{id:"call-\u7684\u5b9e\u73b0-\u539f\u7406-\u548c\u80cc\u666f"},"call \u7684\u5b9e\u73b0 \u539f\u7406 \u548c\u80cc\u666f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function Car(name) {\n  this.name = name;\n  this.run = function (speed) {\n    return this.name + "is running " + speed;\n  };\n}\nconst car = new Car("\u5965\u8fea");\nconsole.log(car.run("slow")); // \u6b64\u65f6\u7684 this \u5c31\u4f1a\u6307\u5411 car \u8fd9\u4e2a\u5b9e\u4f8b\n\n// call \u548c apply\u7684\u5b9e\u73b0\u539f\u7406 \u662f\u56e0\u4e3a \u5b9e\u4f8b\u5bf9\u8c61\u8c03\u7528\u65b9\u6cd5\u65f6\u5019\uff0c\n// this \u7684\u6307\u5411\u4f1a\u6210\u4e3a\u5b9e\u4f8b\u8c03\u7528\u8005 \u7c7b\u4f3c\u4e8e car.run() run \u7684this \u4f1a\u6307\u5411car\nFunction.prototype.myCall = function (context, ...args) {\n  //\u521b\u5efa\u4e00\u4e2a\u8c03\u7528\u8005\u7684\u4e0a\u4e0b\u6587 \u9ed8\u8ba4\u80af\u5b9a\u662f\u4f20\u8fdb\u6765\u7684 context\n  const caller = context || window;\n  //   \u628a \u539f\u6765\u7684\u8c03\u7528\u8005 \u62bd\u79bb\u51fa\u6765 \u6bd4\u5982 cook.call(obj)\n  //   \u6b64\u65f6\u7684this \u5c31\u76f8\u5f53\u4e8e cook \u8fd9\u4e2a\u51fd\u6570\n  //   \u76f8\u5f53\u4e8e\u628a\u539f\u6765\u7684\u51fd\u6570 \u7ed1\u5b9a\u5230\u4e86 \u73b0\u5728\u7684 \u8c03\u7528\u8005\u4e0a\u4e86 \u6539\u53d8\u4e86 \u8c03\u7528\u8005\n  caller.fn = this;\n  console.log(this);\n  //   \u8fd4\u56de\u8c03\u7528\u8005\u8c03\u7528\u51fd\u6570\u7684\u8c03\u7528\u7ed3\u679c\n  const result = eval("caller.fn(...args)");\n  delete caller.fn;\n  return result;\n};\n\nconst cooker = {\n  name: "cooker",\n  cook: function (food) {\n    return this.name + "is making" + food;\n  },\n};\n\nconst res = cooker.cook.myCall({ name: "fjk" }, "banana");\nconsole.log(res);\n')),(0,l.kt)("h3",{id:"apply-\u7684\u5b9e\u73b0\u548c-call-\u5dee\u4e0d\u591a-\u53ea\u4e0d\u8fc7\u53c2\u6570\u662f\u6570\u7ec4"},"apply \u7684\u5b9e\u73b0\u548c call \u5dee\u4e0d\u591a \u53ea\u4e0d\u8fc7\u53c2\u6570\u662f\u6570\u7ec4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'Function.prototype.myApply = function (context, args) {\n  let context = context || window;\n  context.fn = this;\n  let result = eval("context.fn(...args)");\n  delete context.fn;\n  return result;\n};\n')),(0,l.kt)("h3",{id:"bind-\u7684\u539f\u7406-\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570"},"bind \u7684\u539f\u7406 \u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'Function.prototype.myBind = function (context, ...args) {\n  // \u9996\u5148 bind \u7684 \u8c03\u7528\u8005 \u9700\u8981\u5fc5\u987b\u662f\u4e00\u4e2a\u51fd\u6570\n  if (typeof this !== "function") {\n    throw new Error("\u5fc5\u987b\u662f\u4e00\u4e2a\u51fd\u6570");\n  }\n  //   \u6b64\u5904\u7684this \u662f\u539f\u51fd\u6570 xxx.bind() \u4e2d\u7684 xxx\n  const self = this; // cook\n  const newBind = function () {\n    // console.log(arguments);\n    // const arg = args.concat(Array.prototype.slice.call(arguments));\n    // console.log(arg);\n    return self.apply(\n      this instanceof self ? this : context,\n      args.concat(Array.prototype.slice.call(arguments))\n    );\n  };\n  //   \u539f\u6709\u51fd\u6570\u7684\u539f\u578b\u94fe\u7684\u5c5e\u6027 \u6302\u5728 \u8981\u8fd4\u56de\u7684\u51fd\u6570\u4e0b\n  if (this.prototype) {\n    newBind.prototype = Object.create(this.prototype);\n  }\n  return newBind;\n};\n\nconst cooker = {\n  name: "cooker",\n  cook: function (food, ...args) {\n    console.log(args);\n    return this.name + "  is making   " + food + args.join("-");\n  },\n};\n\nconst aNewFunc = cooker.cook.myBind({ name: "fjk" }, "banana", "apple");\nconsole.log(aNewFunc(11));\n')))}m.isMDXComponent=!0}}]);