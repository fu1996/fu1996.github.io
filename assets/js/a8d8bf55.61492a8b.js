"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6345],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),s=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=s(e.components);return a.createElement(o.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=s(t),c=r,k=m["".concat(o,".").concat(c)]||m[c]||d[c]||l;return t?a.createElement(k,i(i({ref:n},u),{},{components:t})):a.createElement(k,i({ref:n},u))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=c;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p[m]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<l;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},58661:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=t(87462),r=(t(67294),t(3905));const l={authors:"junkui",title:"04-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",categories:["js","babel"],tags:["js","babel"],date:new Date("2022-07-13T21:59:55.000Z")},i="Babel \u63d2\u4ef6\u7684\u7f16\u5199(\u4e0b)",p={unversionedId:"babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",id:"babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",title:"04-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",description:"\u672c\u6587\u5e76\u672a\u8be6\u7ec6\u4ecb\u7ecd\u6240\u6709\u7684 babel path \u8282\u70b9\u7684\u76f8\u5173 api\uff0c\u8be6\u7ec6\u7684 \u5173\u4e8e path \u8282\u70b9\u7684\u76f8\u5173\u6587\u6863 \u8bf7\u89c1 \u5b98\u65b9\u63a8\u8350\u6587\u6863\uff08\u4e2d\u6587 \u6709\u70b9\u8001\u65e7\uff09 \u6216\u8005 \u6839\u636e\u5b98\u65b9\u539f\u7248 \u82f1\u6587\u6587\u6863 \u7ffb\u8bd1\u7684 \u4e2d\u6587\u6587\u6863\uff08\u5df2\u7ecf\u5411 \u5b98\u65b9 \u63d0\u4e86 PR \u4f46\u662f\u6682\u672a\u5408\u5e76\uff09\uff0c\u63a8\u8350\u7684 \u662f \u5148\u770b \u6b64\u6587\u6863\uff0c\u53d1\u73b0\u5176\u4e2d \u90e8\u5206 api \u4e0d\u719f\u6089 \u7684\u65f6\u5019 \u518d\u53bb\u67e5 api \u6587\u6863\uff0c\u5370\u8c61\u6df1\u523b\u3002",source:"@site/babel/04-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09.md",sourceDirName:".",slug:"/babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",permalink:"/babel/babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",draft:!1,editUrl:"https://github.com/fu1996/fu1996.github.io/tree/main/babel/04-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09.md",tags:[{label:"js",permalink:"/babel/tags/js"},{label:"babel",permalink:"/babel/tags/babel"}],version:"current",lastUpdatedBy:"fjk",lastUpdatedAt:1694966949,formattedLastUpdatedAt:"2023\u5e749\u670817\u65e5",sidebarPosition:4,frontMatter:{authors:"junkui",title:"04-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0b\uff09",categories:["js","babel"],tags:["js","babel"],date:"2022-07-13T21:59:55.000Z"},sidebar:"tutorialSidebar",previous:{title:"03-babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0a\uff09",permalink:"/babel/babel\u63d2\u4ef6\u7684\u7f16\u5199\uff08\u4e0a\uff09"}},o={},s=[{value:"1. babel \u63d2\u4ef6\u7684 API \u89c4\u8303",id:"1-babel-\u63d2\u4ef6\u7684-api-\u89c4\u8303",level:2},{value:"2. \u6765\u4e2a demo \u5b9e\u73b0 ast \u5c42\u9762\u7684 \u4ee3\u7801\u66ff\u6362",id:"2-\u6765\u4e2a-demo-\u5b9e\u73b0-ast-\u5c42\u9762\u7684-\u4ee3\u7801\u66ff\u6362",level:2},{value:"3. \u4e0a\u4e00\u5c0f\u8282 \u638c\u63e1\u4e86 ast \u8282\u70b9 \u57fa\u7840\u7684 \u4fee\u6539 \u548c \u8bbf\u95ee\uff0c\u52a0\u6df1\u4e00\u4e0b ast \u8282\u70b9\u7684\u64cd\u4f5c",id:"3-\u4e0a\u4e00\u5c0f\u8282-\u638c\u63e1\u4e86-ast-\u8282\u70b9-\u57fa\u7840\u7684-\u4fee\u6539-\u548c-\u8bbf\u95ee\u52a0\u6df1\u4e00\u4e0b-ast-\u8282\u70b9\u7684\u64cd\u4f5c",level:2},{value:"1. \u83b7\u53d6 ast \u8282\u70b9\u7684 \u5c5e\u6027\u503c\uff1apath.node.property",id:"1-\u83b7\u53d6-ast-\u8282\u70b9\u7684-\u5c5e\u6027\u503cpathnodeproperty",level:3},{value:"2. \u83b7\u53d6 \u8be5\u5c5e\u6027 \u5185\u90e8\u7684 path (\u8282\u70b9\u4fe1\u606f)\uff1a path.get(xxx)",id:"2-\u83b7\u53d6-\u8be5\u5c5e\u6027-\u5185\u90e8\u7684-path-\u8282\u70b9\u4fe1\u606f-pathgetxxx",level:3},{value:"3. \u68c0\u67e5\u8282\u70b9\u7684\u7c7b\u578b\uff0c \u901a\u8fc7 babel \u53c2\u6570\u81ea\u5e26\u7684 types \u51fd\u6570\u8fdb\u884c\u68c0\u67e5\u3002",id:"3-\u68c0\u67e5\u8282\u70b9\u7684\u7c7b\u578b-\u901a\u8fc7-babel-\u53c2\u6570\u81ea\u5e26\u7684-types-\u51fd\u6570\u8fdb\u884c\u68c0\u67e5",level:3},{value:"4. \u518d\u6765\u4e00\u9053\u5173\u4e8e ast \u64cd\u4f5c\u8282\u70b9\u7684\u9898\u5c0f\u8bd5\u8eab\u624b\uff08\u5173\u952e\u8fd8\u662f\u5b66\u4f1a\u770b ast \u8bed\u6cd5\u6811\u548c \u5c1d\u8bd5\u4e00\u4e9b ast \u8282\u70b9\u76f8\u5173\u7684 api\uff09",id:"4-\u518d\u6765\u4e00\u9053\u5173\u4e8e-ast-\u64cd\u4f5c\u8282\u70b9\u7684\u9898\u5c0f\u8bd5\u8eab\u624b\u5173\u952e\u8fd8\u662f\u5b66\u4f1a\u770b-ast-\u8bed\u6cd5\u6811\u548c-\u5c1d\u8bd5\u4e00\u4e9b-ast-\u8282\u70b9\u76f8\u5173\u7684-api",level:2},{value:"1. \u9996\u5148\u5206\u6790 \u539f\u4ee3\u7801\u7684 ast \u8bed\u6cd5\u6811",id:"1-\u9996\u5148\u5206\u6790-\u539f\u4ee3\u7801\u7684-ast-\u8bed\u6cd5\u6811",level:3},{value:"2. \u63a5\u4e0b\u6765\u5206\u6790 \u51fd\u6570\u5b9a\u4e49 \u7684\u8fd9\u4e2a\u8282\u70b9",id:"2-\u63a5\u4e0b\u6765\u5206\u6790-\u51fd\u6570\u5b9a\u4e49-\u7684\u8fd9\u4e2a\u8282\u70b9",level:3},{value:"3. \u8fdb\u884c\u7b2c\u4e00\u6b65\uff1a\u5c06 <code>square</code>\u51fd\u6570\u547d\u540d \u8fdb\u884c \u66f4\u540d\uff0c\u6539\u4e3a <code>newSquare</code>",id:"3-\u8fdb\u884c\u7b2c\u4e00\u6b65\u5c06-square\u51fd\u6570\u547d\u540d-\u8fdb\u884c-\u66f4\u540d\u6539\u4e3a-newsquare",level:3},{value:"4. \u63a5\u4e0b\u6765 \u5c06 <code>newSquare</code>\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a <code>left</code>\u53c2\u6570\u3002",id:"4-\u63a5\u4e0b\u6765-\u5c06-newsquare\u7684\u5165\u53c2\u589e\u52a0-\u4e00\u4e2a-left\u53c2\u6570",level:3},{value:"5. \u5c06 <code>n * n</code> \u8fdb\u884c \u66ff\u6362\uff0c\u6362\u6210 <code>left ** n;</code>",id:"5-\u5c06-n--n-\u8fdb\u884c-\u66ff\u6362\u6362\u6210-left--n",level:3},{value:"6. \u6700\u540e\u4e00\u6b65\uff1a\u5728\u8c03\u7528 <code>square</code>\u5904 \u8fdb\u884c\u4fee\u6539\uff0c\u9996\u5148\u5c06\u51fd\u6570\u540d \u6539\u4e3a <code>newSquare</code>\uff0c\u7136\u540e\u5728\uff0c\u5bf9\u8be5\u51fd\u6570\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a <code>222</code>",id:"6-\u6700\u540e\u4e00\u6b65\u5728\u8c03\u7528-square\u5904-\u8fdb\u884c\u4fee\u6539\u9996\u5148\u5c06\u51fd\u6570\u540d-\u6539\u4e3a-newsquare\u7136\u540e\u5728\u5bf9\u8be5\u51fd\u6570\u7684\u5165\u53c2\u589e\u52a0-\u4e00\u4e2a-222",level:3},{value:"7. \u603b\u7ed3 \u4ee5\u53ca \u5168\u90e8\u4ee3\u7801",id:"7-\u603b\u7ed3-\u4ee5\u53ca-\u5168\u90e8\u4ee3\u7801",level:3}],u={toc:s},m="wrapper";function d(e){let{components:n,...l}=e;return(0,r.kt)(m,(0,a.Z)({},u,l,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"babel-\u63d2\u4ef6\u7684\u7f16\u5199\u4e0b"},"Babel \u63d2\u4ef6\u7684\u7f16\u5199(\u4e0b)"),(0,r.kt)("p",null,"\u672c\u6587\u5e76\u672a\u8be6\u7ec6\u4ecb\u7ecd\u6240\u6709\u7684 babel path \u8282\u70b9\u7684\u76f8\u5173 api\uff0c\u8be6\u7ec6\u7684 \u5173\u4e8e path \u8282\u70b9\u7684\u76f8\u5173\u6587\u6863 \u8bf7\u89c1 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jamiebuilds/babel-handbook"},"\u5b98\u65b9\u63a8\u8350\u6587\u6863\uff08\u4e2d\u6587 \u6709\u70b9\u8001\u65e7\uff09")," \u6216\u8005 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/fu1996/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md"},"\u6839\u636e\u5b98\u65b9\u539f\u7248 \u82f1\u6587\u6587\u6863 \u7ffb\u8bd1\u7684 \u4e2d\u6587\u6587\u6863\uff08\u5df2\u7ecf\u5411 \u5b98\u65b9 \u63d0\u4e86 PR \u4f46\u662f\u6682\u672a\u5408\u5e76\uff09"),"\uff0c\u63a8\u8350\u7684 \u662f \u5148\u770b \u6b64\u6587\u6863\uff0c\u53d1\u73b0\u5176\u4e2d \u90e8\u5206 api \u4e0d\u719f\u6089 \u7684\u65f6\u5019 \u518d\u53bb\u67e5 api \u6587\u6863\uff0c\u5370\u8c61\u6df1\u523b\u3002"),(0,r.kt)("h2",{id:"1-babel-\u63d2\u4ef6\u7684-api-\u89c4\u8303"},"1. babel \u63d2\u4ef6\u7684 API \u89c4\u8303"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Babel \u63d2\u4ef6 \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570 \u63a5\u53d7 babel \u4f5c\u4e3a\u53c2\u6570\uff0c\u901a\u8fc7 \u4f1a \u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"babel"),"\u53c2\u6570\u91cc\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"types"),"\u51fd\u6570")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function(babel) {\n  // plugin contents\n}\n// or\nexport default function({types}) {\n  // plugin contents\n}\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u8fd4\u56de\u7684 \u662f\u4e00\u4e2a \u5bf9\u8c61\u3002\u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"visitor"),"\u5c5e\u6027\u662f\u8fd9\u4e2a\u63d2\u4ef6\u7684\u4e3b\u8981\u8bbf\u95ee\u8005\u3002",(0,r.kt)("inlineCode",{parentName:"li"},"visitor"),"\u7684 \u6bcf\u4e2a\u51fd\u6570\u4e2d \u90fd\u4f1a\u63a5\u53d7 2 \u4e2a \u53c2\u6570\uff1a ",(0,r.kt)("inlineCode",{parentName:"li"},"path"),"\u548c ",(0,r.kt)("inlineCode",{parentName:"li"},"state"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export default function ({ types: t }) {\n  return {\n    visitor: {\n      // \u6b64\u5904\u7684\u51fd\u6570 \u540d \u662f\u4ece ast \u91cc \u53d6\u7684\n      Identifier(path, state) {},\n      ASTNodeTypeHere(path, state) {},\n    },\n  };\n}\n")),(0,r.kt)("h2",{id:"2-\u6765\u4e2a-demo-\u5b9e\u73b0-ast-\u5c42\u9762\u7684-\u4ee3\u7801\u66ff\u6362"},"2. \u6765\u4e2a demo \u5b9e\u73b0 ast \u5c42\u9762\u7684 \u4ee3\u7801\u66ff\u6362"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u76ee\u7684\uff1a")," \u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"foo === bar;")," \u8f6c\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"replaceFoo !== myBar;")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u9996\u5148 \u901a\u8fc7 ",(0,r.kt)("a",{parentName:"li",href:"https://astexplorer.net/"},"https://astexplorer.net/")," \u6765\u5206\u6790 ast \u7ed3\u6784\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220713221218536",src:t(60595).Z,width:"1978",height:"1406"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "BinaryExpression",\n  "operator": "===",\n  "left": {\n    "type": "Identifier",\n    "name": "foo"\n  },\n  "right": {\n    "type": "Identifier",\n    "name": "bar"\n  }\n}\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u4ece ",(0,r.kt)("inlineCode",{parentName:"li"},"BinaryExpression"),"\u6dfb\u52a0 \u8bbf\u95ee\u8005 \u8fdb\u884c ast \u8282\u70b9\u5904\u7406\uff0c\u53ef\u4ee5 \u770b\u5230 \u5f53 ",(0,r.kt)("inlineCode",{parentName:"li"},"operator"),"\u4e3a === \u7684\u65f6\u5019 \u9700\u8981\u8fdb\u884c\u5904\u7406\u3002\u4ee3\u7801\u5982\u4e0b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// plugin.js\nmodule.exports = function ({ types }) {\n  console.log("t");\n  return {\n    visitor: {\n      BinaryExpression(path, state) {\n        console.log("path1", path);\n        // \u4e0d\u662f !== \u8bed\u6cd5\u7684 \u76f4\u63a5\u8fd4\u56de\n        if (path.node.operator !== "===") {\n          return;\n        }\n      },\n    },\n  };\n};\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u8fdb\u884c ast \u8282\u70b9\u7684 \u66f4\u6539\uff0c\u56e0\u4e3a ast \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5 \u5bf9 path \u5b57\u6bb5 \u76f4\u63a5\u66f4\u6539\u5176\u5c5e\u6027\u503c\u5373\u53ef\u3002 \u6bd4\u5982 \u5c06 left \u548c right \u8282\u70b9 \u7684 name \u8fdb\u884c\u4fee\u6539\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// plugin.js\nmodule.exports = function ({ types }) {\n  console.log("t");\n  return {\n    visitor: {\n      BinaryExpression(path, state) {\n        console.log("path1", path);\n        if (path.node.operator !== "===") {\n          return;\n        }\n        if (path.node.operator === "===") {\n          path.node.operator = "!==";\n        }\n        if (path.node.left.name === "foo") {\n          path.node.left.name = "replaceFoo";\n        }\n        if (path.node.right.name === "bar") {\n          path.node.right.name = "myBar";\n        }\n      },\n    },\n  };\n};\n')),(0,r.kt)("ol",{parentName:"li",start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u4ece index.js \u7ecf\u8fc7 \u4e0a\u8ff0 babel \u63d2\u4ef6\u5904\u7406\u4ee5\u540e\u5f97\u51fa dist.js \u5185\u5bb9\u4e3a\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// index.js\nfoo === bar;\na = 123;\n\n// babel \u63d2\u4ef6\u5904\u7406\u540e\nreplaceFoo !== myBar;\na = 123;\n")))))),(0,r.kt)("h2",{id:"3-\u4e0a\u4e00\u5c0f\u8282-\u638c\u63e1\u4e86-ast-\u8282\u70b9-\u57fa\u7840\u7684-\u4fee\u6539-\u548c-\u8bbf\u95ee\u52a0\u6df1\u4e00\u4e0b-ast-\u8282\u70b9\u7684\u64cd\u4f5c"},"3. \u4e0a\u4e00\u5c0f\u8282 \u638c\u63e1\u4e86 ast \u8282\u70b9 \u57fa\u7840\u7684 \u4fee\u6539 \u548c \u8bbf\u95ee\uff0c\u52a0\u6df1\u4e00\u4e0b ast \u8282\u70b9\u7684\u64cd\u4f5c"),(0,r.kt)("h3",{id:"1-\u83b7\u53d6-ast-\u8282\u70b9\u7684-\u5c5e\u6027\u503cpathnodeproperty"},"1. \u83b7\u53d6 ast \u8282\u70b9\u7684 \u5c5e\u6027\u503c\uff1apath.node.property"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"BinaryExpression(path) {\n  path.node.left;\n  path.node.right;\n  path.node.operator;\n}\n")),(0,r.kt)("h3",{id:"2-\u83b7\u53d6-\u8be5\u5c5e\u6027-\u5185\u90e8\u7684-path-\u8282\u70b9\u4fe1\u606f-pathgetxxx"},"2. \u83b7\u53d6 \u8be5\u5c5e\u6027 \u5185\u90e8\u7684 path (\u8282\u70b9\u4fe1\u606f)\uff1a path.get(xxx)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"BinaryExpression(path) {\n  path.get('left'); // \u8fd4\u56de\u7684\u662f\u4e00\u4e2a path \u6027\u7684\n}\nProgram(path) {\n  path.get('body.0');\n}\n")),(0,r.kt)("h3",{id:"3-\u68c0\u67e5\u8282\u70b9\u7684\u7c7b\u578b-\u901a\u8fc7-babel-\u53c2\u6570\u81ea\u5e26\u7684-types-\u51fd\u6570\u8fdb\u884c\u68c0\u67e5"},"3. \u68c0\u67e5\u8282\u70b9\u7684\u7c7b\u578b\uff0c \u901a\u8fc7 babel \u53c2\u6570\u81ea\u5e26\u7684 types \u51fd\u6570\u8fdb\u884c\u68c0\u67e5\u3002"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7b80\u5355\u5224\u65ad\u8282\u70b9\u7684\u7c7b\u578b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// plugin.js\nmodule.exports = function ({ types: t }) {\n  console.log("t");\n  return {\n    visitor: {\n      BinaryExpression(path, state) {\n        console.log("path1", path.get("left"));\n        if (path.node.operator !== "===") {\n          return;\n        }\n        if (path.node.operator === "===") {\n          path.node.operator = "!==";\n        }\n        // \u7b49\u540c\u4e8e path.node.left.type === "Identifier"\n        if (t.isIdentifier(path.node.left)) {\n          path.node.left.name = "replaceFoo";\n        }\n      },\n    },\n  };\n};\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u5224\u65ad\u8282\u70b9\u7684\u7c7b\u578b\uff0c\u5916\u52a0 \u6d45\u5c42\u5c5e\u6027\u7684\u6821\u9a8c")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'BinaryExpression(path) {\n  if (t.isIdentifier(path.node.left, { name: "n" })) {\n    // ...\n  }\n}\n')),(0,r.kt)("p",null,"\u529f\u80fd\u4e0a\u7b49\u540c\u4e8e\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'BinaryExpression(path) {\n  if (\n    path.node.left != null &&\n    path.node.left.type === "Identifier" &&\n    path.node.left.name === "n"\n  ) {\n    // ...\n  }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220713224751387",src:t(32124).Z,width:"2098",height:"1632"})),(0,r.kt)("h2",{id:"4-\u518d\u6765\u4e00\u9053\u5173\u4e8e-ast-\u64cd\u4f5c\u8282\u70b9\u7684\u9898\u5c0f\u8bd5\u8eab\u624b\u5173\u952e\u8fd8\u662f\u5b66\u4f1a\u770b-ast-\u8bed\u6cd5\u6811\u548c-\u5c1d\u8bd5\u4e00\u4e9b-ast-\u8282\u70b9\u76f8\u5173\u7684-api"},"4. \u518d\u6765\u4e00\u9053\u5173\u4e8e ast \u64cd\u4f5c\u8282\u70b9\u7684\u9898\u5c0f\u8bd5\u8eab\u624b\uff08\u5173\u952e\u8fd8\u662f\u5b66\u4f1a\u770b ast \u8bed\u6cd5\u6811\u548c \u5c1d\u8bd5\u4e00\u4e9b ast \u8282\u70b9\u76f8\u5173\u7684 api\uff09"),(0,r.kt)("p",null,"\u5f53\u524d\u7a0b\u5e8f\u4ee3\u7801\u4e3a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function square(n) {\n  return n * n;\n}\n\nconst a = 2;\nconsole.log(square(a));\n")),(0,r.kt)("p",null,"\u76ee\u6807\u7a0b\u5e8f\u4ee3\u7801\u662f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function newSquare(n, left) {\n  return left ** n;\n}\n\nconst a = 2;\nconsole.log(newSquare(a, 222));\n")),(0,r.kt)("p",null,"\u6574\u4f53\u64cd\u4f5c ast \u8bed\u6cd5\u6811\u7684\u5206\u6790\u903b\u8f91\uff1a\uff08\u7ed3\u5c3e\u4f1a\u653e\u5b8c\u6574\u4ee3\u7801\uff09"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"square"),"\u51fd\u6570\u547d\u540d \u8fdb\u884c \u66f4\u540d\uff0c\u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare")),(0,r.kt)("li",{parentName:"ol"},"\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare"),"\uff08\u56e0\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"square"),"\u53c2\u6570 \u8282\u70b9\u7684 ast \u540d\u79f0 \u5df2\u7ecf\u6539\u4e3a\u4e86",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare")," \uff09\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"left"),"\u53c2\u6570"),(0,r.kt)("li",{parentName:"ol"},"\u5c06 ",(0,r.kt)("inlineCode",{parentName:"li"},"n * n")," \u8fdb\u884c \u66ff\u6362\uff0c\u6362\u6210 ",(0,r.kt)("inlineCode",{parentName:"li"},"left ** n;")),(0,r.kt)("li",{parentName:"ol"},"\u5728\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"square"),"\u5904 \u8fdb\u884c\u4fee\u6539\uff0c\u9996\u5148\u5c06\u51fd\u6570\u540d \u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare"),"\uff0c\u7136\u540e\u5728\uff0c\u5bf9\u8be5\u51fd\u6570\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"li"},"222"))),(0,r.kt)("h3",{id:"1-\u9996\u5148\u5206\u6790-\u539f\u4ee3\u7801\u7684-ast-\u8bed\u6cd5\u6811"},"1. \u9996\u5148\u5206\u6790 \u539f\u4ee3\u7801\u7684 ast \u8bed\u6cd5\u6811"),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u7a0b\u5e8f \u4ee3\u7801 \u88ab\u89e3\u6790\u4e3a 3 \u6bb5 ast \u8bed\u6cd5\u6811 \u8282\u70b9"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717171544700",src:t(15635).Z,width:"2870",height:"1152"})),(0,r.kt)("h3",{id:"2-\u63a5\u4e0b\u6765\u5206\u6790-\u51fd\u6570\u5b9a\u4e49-\u7684\u8fd9\u4e2a\u8282\u70b9"},"2. \u63a5\u4e0b\u6765\u5206\u6790 \u51fd\u6570\u5b9a\u4e49 \u7684\u8fd9\u4e2a\u8282\u70b9"),(0,r.kt)("p",null,"\u9f20\u6807\u6ed1\u9009 1-3 \u884c\uff0c\u53d1\u73b0\u53f3\u4fa7 \u81ea\u52a8\u5c55\u5f00\u4e86\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717171740780",src:t(25541).Z,width:"2780",height:"1694"})),(0,r.kt)("h3",{id:"3-\u8fdb\u884c\u7b2c\u4e00\u6b65\u5c06-square\u51fd\u6570\u547d\u540d-\u8fdb\u884c-\u66f4\u540d\u6539\u4e3a-newsquare"},"3. \u8fdb\u884c\u7b2c\u4e00\u6b65\uff1a\u5c06 ",(0,r.kt)("inlineCode",{parentName:"h3"},"square"),"\u51fd\u6570\u547d\u540d \u8fdb\u884c \u66f4\u540d\uff0c\u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"h3"},"newSquare")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717172415069",src:t(99476).Z,width:"2818",height:"1640"})),(0,r.kt)("p",null,"\u7531\u56fe\u770b\u51fa\uff0c\u5982\u4f55\u786e\u5b9a \u5f53\u524d\u7684\u8282\u70b9\u662f square \u51fd\u6570\u7684\u547d\u540d \u8282\u70b9\u5462\uff1f\uff081 \u5206\u949f \u601d\u8003\u4e00\u4e0b\uff09\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8282\u70b9\u7684\u7c7b\u578b\u9996\u5148\u662f\uff1a",(0,r.kt)("strong",{parentName:"li"},"Identifier")," \u7c7b\u578b\uff0c\u5e76\u4e14 \u5f53\u524d\u8282\u70b9 \u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"name")," \u5b57\u6bb5\u662f ",(0,r.kt)("strong",{parentName:"li"},"square")),(0,r.kt)("li",{parentName:"ul"},"\u8282\u70b9\u7684 \u7236\u7ea7 \u8282\u70b9\u7684 \u7c7b\u578b \u662f ",(0,r.kt)("strong",{parentName:"li"},"FunctionDeclaration")," \u7684\u3002")),(0,r.kt)("p",null,"\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u65b0\u5efa \u53d8\u91cf\uff0c\u8bb0\u5f55 \u65b0\u51fd\u6570\u7684\u51fd\u6570\u540d\nconst newName = "newSquare";\n// \u83b7\u53d6\u5f53\u524d \u51fd\u6570\u7684 \u7236\u7ea7\u3002\u67e5\u627e\u6700\u63a5\u8fd1\u7684\u7236\u51fd\u6570\u6216\u7a0b\u5e8f\uff1a\nconst parentFunc = path.getFunctionParent();\nif (parentFunc) {\n  // \u5f53\u524d\u7236\u8282\u70b9 \u662f square\u51fd\u6570 \u5e76\u4e14\u5f53\u524d\u7684\u8282\u70b9\u7684key\u662f id\uff08\u6b64\u5904\u662f\u4e3a\u4e86\u786e\u8ba4 square \u7684\u51fd\u6570\u547d\u540d\u8282\u70b9\uff09\u3002\n  // \u7136\u540e\u5bf9\u6b64\u51fd\u6570\u8fdb\u884c\u91cd\u547d\u540d \u4ece square \u6539\u4e3a newName\n  if (parentFunc.node.id.name === "square" && path.key === "id") {\n    console.log("\u5bf9 square \u8fdb\u884c\u91cd\u547d\u540d\uff1a", newName);\n    path.node.name = newName;\n  }\n}\n')),(0,r.kt)("h3",{id:"4-\u63a5\u4e0b\u6765-\u5c06-newsquare\u7684\u5165\u53c2\u589e\u52a0-\u4e00\u4e2a-left\u53c2\u6570"},"4. \u63a5\u4e0b\u6765 \u5c06 ",(0,r.kt)("inlineCode",{parentName:"h3"},"newSquare"),"\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"h3"},"left"),"\u53c2\u6570\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717173719918",src:t(52029).Z,width:"2858",height:"1638"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5f53\u524d\u8282\u70b9 \u7684 \u7c7b\u578b \u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"Identifier"),"\u7c7b\u578b\uff0c\u5e76\u4e14\u662f \u5728 \u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"params"),"\u7684 \u5217\u8868\u91cc (\u5217\u8868\uff0c\u5c31\u610f\u5473\u7740 \u53ef\u4ee5 \u8fdb\u884c \u589e\u5220\u6539\u67e5\u4e86)"),(0,r.kt)("li",{parentName:"ul"},"\u5f53\u524d\u8282\u70b9\u7684 \u7236\u7ea7 \u8282\u70b9\u7c7b\u578b \u662f ",(0,r.kt)("strong",{parentName:"li"},"FunctionDeclaration")," \u7684\uff0c\u5e76\u4e14 \u7236\u7ea7\u8282\u70b9\u4e0b\u7684 ",(0,r.kt)("strong",{parentName:"li"},"id \u7684 name")," \u5c5e\u6027 \u5df2\u7ecf\u53d8\u66f4\u4e3a\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare"))),(0,r.kt)("p",null,"\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5f53\u524d\u7236\u8282\u70b9 \u662f square\u51fd\u6570 \u5e76\u4e14\u5f53\u524d\u7684\u8282\u70b9\u7684listKey\u662f params\uff08\u6b64\u5904\u662f\u4e3a\u4e86\u6392\u9664 square \u7684\u51fd\u6570\u547d\u540d\u8282\u70b9\uff09\u3002\n// \u6b64\u5904\u662f\u5728\u91cd\u547d\u540d\u540e\u624d\u4f1a\u8d70\u7684 \u903b\u8f91 \u6240\u4ee5 \u8be5\u8282\u70b9 \u7236\u7ea7\u7684 \u540d\u79f0\u5224\u65ad\u7528\u7684\u662f newName \u800c\u4e0d\u662f square\nif (\n  parentFunc.type === "FunctionDeclaration" &&\n  parentFunc.node.id.name === newName &&\n  path.listKey === "params"\n) {\n  console.log("\u65b0\u589e\u51fd\u6570\u53c2\u6570 left");\n  path.container.push(t.identifier("left"));\n}\n')),(0,r.kt)("h3",{id:"5-\u5c06-n--n-\u8fdb\u884c-\u66ff\u6362\u6362\u6210-left--n"},"5. \u5c06 ",(0,r.kt)("inlineCode",{parentName:"h3"},"n * n")," \u8fdb\u884c \u66ff\u6362\uff0c\u6362\u6210 ",(0,r.kt)("inlineCode",{parentName:"h3"},"left ** n;")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717175318229",src:t(42561).Z,width:"2848",height:"1588"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53d1\u73b0 \u5982\u679c\u5355\u7eaf\u7684 \u53bb \u64cd\u4f5c ",(0,r.kt)("strong",{parentName:"p"},"Identifier"),"\u7c7b\u578b\u7684 n \u60c5\u51b5\u6709\u4e9b\u591a\uff0c\u5e76\u4e14 \u5f53\u524d\u60c5\u51b5 \u8fd8\u8981 \u5224\u65ad \u64cd\u4f5c\u7b26\uff08",(0,r.kt)("strong",{parentName:"p"},"operator"),"\uff09 \u662f\u4e0d\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"*"),",\u6362\u4e2a\u601d\u8def\uff0c\u53bb\u64cd\u4f5c ",(0,r.kt)("strong",{parentName:"p"},"BinaryExpression")," \u7c7b\u578b\u7684\u6570\u636e")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5728 ",(0,r.kt)("strong",{parentName:"p"},"BinaryExpression"),"\u7c7b\u578b \u4e2d\uff0c\u4ec5\u4ec5 \u9700\u8981 \u5224\u65ad \u5f53\u524d ",(0,r.kt)("inlineCode",{parentName:"p"},"operator"),"\u7684 \u5c5e\u6027 \u662f\u4e0d\u662f \u6211\u4eec\u9700\u8981\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"*")),(0,r.kt)("p",{parentName:"li"},"\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},'      BinaryExpression(path, state) {\n        if (path.node.operator !== "*") return;\n        console.log("BinaryExpression");\n        // \u66ff\u6362\u4e00\u4e2a\u8282\u70b9\n        path.replaceWith(\n          // t.binaryExpression("**", path.node.left, t.NumericLiteral(2))\n          t.binaryExpression("**", t.identifier("left"), t.identifier("n"))\n        );\n      },\n')))),(0,r.kt)("h3",{id:"6-\u6700\u540e\u4e00\u6b65\u5728\u8c03\u7528-square\u5904-\u8fdb\u884c\u4fee\u6539\u9996\u5148\u5c06\u51fd\u6570\u540d-\u6539\u4e3a-newsquare\u7136\u540e\u5728\u5bf9\u8be5\u51fd\u6570\u7684\u5165\u53c2\u589e\u52a0-\u4e00\u4e2a-222"},"6. \u6700\u540e\u4e00\u6b65\uff1a\u5728\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"h3"},"square"),"\u5904 \u8fdb\u884c\u4fee\u6539\uff0c\u9996\u5148\u5c06\u51fd\u6570\u540d \u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"h3"},"newSquare"),"\uff0c\u7136\u540e\u5728\uff0c\u5bf9\u8be5\u51fd\u6570\u7684\u5165\u53c2\u589e\u52a0 \u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"h3"},"222")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20220717180115965",src:t(72695).Z,width:"2856",height:"1668"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u76ee\u6807 \u662f\u5c06 name \u5b57\u6bb5\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"square")," \u5b57\u6bb5 \u6539\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"newSquare"),"\u3002")),(0,r.kt)("p",null,"\u65b9\u6cd5\u4e00\uff1a\u5176 \u7236\u7ea7\u8282\u70b9 \u662f\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"CallExpression"),"\uff0c\u76f4\u63a5\u5728\u5176 \u7236\u7ea7\u8282\u70b9 \u64cd\u4f5c \u5b83\u3002"),(0,r.kt)("p",null,"\u4f2a\u4ee3\u7801 \u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'      CallExpression(path, state) {\n        console.log("CallExpression");\n        // \u5f53\u524d\u88ab\u8c03\u7528\u51fd\u6570\u7684 \u540d\u79f0 \u662f square\n        if (path.node.callee.name === \'square\') {\n          console.log("\u5728 CallExpression \u4e2d\uff0c\u66f4\u6539 \u88ab\u8c03\u7528 \u51fd\u6570 square \u7684\u540d\u5b57 \u4e3a", newName);\n          path.node.callee.name  = newName;\n        }\n      },\n')),(0,r.kt)("p",null,"\u65b9\u6cd5\u4e8c\uff1a\u901a\u8fc7 \u8282\u70b9 ",(0,r.kt)("inlineCode",{parentName:"p"},"Identifier")," \u8fdb\u884c\u64cd\u4f5c"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5224\u65ad\u5f53\u524d \u8282\u70b9\u7684\u5c5e\u6027\u662f ",(0,r.kt)("inlineCode",{parentName:"li"},"callee")," \u8868\u793a\u662f\u88ab\u8c03\u7528\u7684\uff0c\u5e76\u4e14 \u5f53\u524d \u8282\u70b9\u7684 \u540d\u5b57 \u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"square"))),(0,r.kt)("p",null,"\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5224\u65ad\u662f\u4e0d\u662f square \u7684\u51fd\u6570\u8c03\u7528\nif (path.key === "callee" && path.isIdentifier({ name: "square" })) {\n  console.log("\u5bf9square\u51fd\u6570\u8c03\u7528\u8fdb\u884c\u91cd\u547d\u540d", newName);\n  path.node.name = newName;\n}\n')),(0,r.kt)("h3",{id:"7-\u603b\u7ed3-\u4ee5\u53ca-\u5168\u90e8\u4ee3\u7801"},"7. \u603b\u7ed3 \u4ee5\u53ca \u5168\u90e8\u4ee3\u7801"),(0,r.kt)("p",null,"\u5230\u73b0\u5728\uff0c\u4f60\u4f1a\u53d1\u73b0\u5176\u5b9e \u5bf9 ast \u8bed\u6cd5\u6811\u7684\u64cd\u4f5c\uff0c\u4e3b\u8981\u8fd8\u662f \u64cd\u4f5c\u4e00\u4e2a ast \u8bed\u6cd5\u6811\u7684\u5bf9\u8c61\uff0c\u53ea\u8981 \u5bf9 ast \u8bed\u6cd5\u6811 \u5bf9\u8c61 \u8fdb\u884c \u7b26\u5408 ast \u8bed\u6cd5\u6811 \u76f8\u5173\u89c4\u5219\u7684 \u5c5e\u6027\u7684 \u66f4\u6539\uff0cbabel \u5c31\u4f1a \u81ea\u52a8 \u5904\u7406 ast \u8bed\u6cd5\u6811\u5bf9\u8c61 \u5e76\u751f\u6210 \u65b0\u7684 \u4ee3\u7801\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6838\u5fc3\u4ee3\u7801")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// square-plugin.js\n// \u65b0\u5efa \u53d8\u91cf\uff0c\u8bb0\u5f55 \u65b0\u51fd\u6570\u7684\u51fd\u6570\u540d\nconst newName = "newSquare";\n\nmodule.exports = function ({ types: t }) {\n  return {\n    visitor: {\n      Identifier(path, state) {\n        console.log("\u8d70\u8fdb Identifier");\n        if (path.parentPath && path.listKey === "arguments") {\n          console.log("\u589e\u52a0\u53c2\u6570");\n          path.container.push(t.NumericLiteral(222));\n          return;\n        }\n\n        // \u83b7\u53d6\u5f53\u524d \u51fd\u6570\u7684 \u7236\u7ea7\u3002\u67e5\u627e\u6700\u63a5\u8fd1\u7684\u7236\u51fd\u6570\u6216\u7a0b\u5e8f\uff1a\n        const parentFunc = path.getFunctionParent();\n        if (parentFunc) {\n          // \u5f53\u524d\u7236\u8282\u70b9 \u662f square\u51fd\u6570 \u5e76\u4e14\u5f53\u524d\u7684\u8282\u70b9\u7684listKey\u662f params\uff08\u6b64\u5904\u662f\u4e3a\u4e86\u6392\u9664 square \u7684\u51fd\u6570\u547d\u540d\u8282\u70b9\uff09\u3002\n          // \u6b64\u5904\u662f\u5728\u91cd\u547d\u540d\u540e\u624d\u4f1a\u8d70\u7684 \u903b\u8f91 \u6240\u4ee5 \u8be5\u8282\u70b9 \u7236\u7ea7\u7684 \u540d\u79f0\u5224\u65ad\u7528\u7684\u662f newName \u800c\u4e0d\u662f square\n          if (\n            parentFunc.type === "FunctionDeclaration" &&\n            parentFunc.node.id.name === newName &&\n            path.listKey === "params"\n          ) {\n            console.log("\u65b0\u589e\u51fd\u6570\u53c2\u6570 left");\n            path.container.push(t.identifier("left"));\n          }\n          // \u5f53\u524d\u7236\u8282\u70b9 \u662f square\u51fd\u6570 \u5e76\u4e14\u5f53\u524d\u7684\u8282\u70b9\u7684key\u662f id\uff08\u6b64\u5904\u662f\u4e3a\u4e86\u786e\u8ba4 square \u7684\u51fd\u6570\u547d\u540d\u8282\u70b9\uff09\u3002\n          // \u7136\u540e\u5bf9\u6b64\u51fd\u6570\u8fdb\u884c\u91cd\u547d\u540d \u4ece square \u6539\u4e3a newName\n          if (parentFunc.node.id.name === "square" && path.key === "id") {\n            console.log("\u5bf9 square \u8fdb\u884c\u91cd\u547d\u540d\uff1a", newName);\n            path.node.name = newName;\n          }\n        }\n        // \u65b9\u6cd5\u4e8c\uff1a \u5224\u65ad\u662f\u4e0d\u662f square \u7684\u51fd\u6570\u8c03\u7528\n        // if (path.key === \'callee\' && path.isIdentifier({name: \'square\'})) {\n        //   console.log("\u5bf9square\u51fd\u6570\u8c03\u7528\u8fdb\u884c\u91cd\u547d\u540d", newName);\n        //   path.node.name = newName;\n        // }\n      },\n      BinaryExpression(path, state) {\n        if (path.node.operator !== "*") return;\n        console.log("BinaryExpression");\n        // \u66ff\u6362\u4e00\u4e2a\u8282\u70b9\n        path.replaceWith(\n          // t.binaryExpression("**", path.node.left, t.NumericLiteral(2))\n          t.binaryExpression("**", t.identifier("left"), t.identifier("n"))\n        );\n      },\n      CallExpression(path, state) {\n        console.log("CallExpression");\n        // \u65b9\u6cd51\uff1a \u5f53\u524d\u88ab\u8c03\u7528\u51fd\u6570\u7684 \u540d\u79f0 \u662f square\n        if (path.node.callee.name === "square") {\n          console.log(\n            "\u5728 CallExpression \u4e2d\uff0c\u66f4\u6539 \u88ab\u8c03\u7528 \u51fd\u6570 square \u7684\u540d\u5b57 \u4e3a",\n            newName\n          );\n          path.node.callee.name = newName;\n        }\n      },\n      FunctionDeclaration(path, state) {\n        console.log("FunctionDeclaration");\n        // const params = path.get(\'params\');\n        // const params = path.get(\'params\');\n        // params.push(t.identifier(\'left\'));\n        // console.log(\'FunctionDeclaration end\', path);\n        // path.params = params;\n        // path.params.push(t.identifier(\'right\'));\n      },\n    },\n  };\n};\n')))}d.isMDXComponent=!0},60595:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220713221218536-3a862a426633c2379943f1d597184a7a.png"},32124:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220713224751387-f8c30ba5e20ace18617ca5e071f6afa6.png"},15635:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717171544700-77d3f53aba0dc3105ef593c037eb4ac0.png"},25541:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717171740780-ac11157892f4c67f835477ca346d7724.png"},99476:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717172415069-bd6c0f3fc6db8b597887639b84027025.png"},52029:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717173719918-14859102aae8a7835c72e72201a6d640.png"},42561:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717175318229-598a16bed3e2a21eee8d8948cd5650d3.png"},72695:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/image-20220717180115965-aad89a7f24c7060e0d78f6640794f9fa.png"}}]);